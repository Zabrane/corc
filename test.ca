{% #include "test.h"%}

async read_socket(struct test_s* data) {
  while socket_open {
    await;
    read_socket;
  }
  call bar;
  test;
  await;
  if approved {
    thing1;
    await;
  } else {
    thing2;
    await;
  }
}

sub bar {
  while bax {
    await;
    bim;
  }
}

{%

void foo() {
}

%}
